{"version":3,"sources":["../static/js/15.e25a7e25.chunk.js","views/Schedules/Schedules.js"],"names":["webpackJsonp","290","module","__webpack_exports__","__webpack_require__","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","defineProperty","__WEBPACK_IMPORTED_MODULE_0_react__","__WEBPACK_IMPORTED_MODULE_0_react___default","n","__WEBPACK_IMPORTED_MODULE_1_reactstrap__","__WEBPACK_IMPORTED_MODULE_2_react_router_dom__","__WEBPACK_IMPORTED_MODULE_3_jquery__","__WEBPACK_IMPORTED_MODULE_3_jquery___default","_createClass","defineProperties","target","props","i","length","descriptor","key","protoProps","staticProps","jobsData","id","status","app_name","duration","appsData","power","name","mfrs","ScheduleRow","_Component","this","_this","getPrototypeOf","state","job","jobLink","a","createElement","toString","scope","to","Schedules","_Component2","_this2","ajax","type","async","url","context","document","body","success","data","parseJSON","_this3","className","xl","size","offset","col","xs","sm","md","lg","ModalAddJob","appdata","responsive","striped","map","index","reload","render","_Component3","_this4","now","Date","date","getFullYear","getMonth","getDate","getHours","opt","push","primary","option","time","togglePrimary","bind","submitJob","setState","getElementById","selectedIndex","aid","start_time","finish_time","alert","fin","sta","ret","startTime","getTime","toFixed","lastTime","stopTime","window","location","style","float","color","onClick","isOpen","toggle","defaultValue","placeholder"],"mappings":"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","file":"static/js/15.e25a7e25.chunk.js","sourcesContent":["webpackJsonp([15],{\n\n/***/ 290:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_reactstrap__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_react_router_dom__ = __webpack_require__(29);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_jquery__ = __webpack_require__(60);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_jquery___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_jquery__);\nvar _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var jobsData=[{\"id\":1,\"status\":\"Pending\",\"app_name\":\"app1\",\"duration\":\"100min\"},{\"id\":3,\"status\":\"Running\",\"app_name\":\"app3\",\"duration\":\"1h\"}];var appsData=[{\"id\":1,\"status\":\"Active\",\"power\":\"400\",\"name\":\"app1\",\"mfrs\":\"mfrs1\"},{\"id\":3,\"status\":\"Inactive\",\"power\":\"400\",\"name\":\"app3\",\"mfrs\":\"mfrs3\"}];var getBadge=function getBadge(status){return status==='Active'?'success':status==='Inactive'?'secondary':status==='Pending'?'warning':status==='Banned'?'danger':'primary';};var ScheduleRow=function(_Component){_inherits(ScheduleRow,_Component);function ScheduleRow(props){_classCallCheck(this,ScheduleRow);var _this=_possibleConstructorReturn(this,(ScheduleRow.__proto__||Object.getPrototypeOf(ScheduleRow)).call(this,props));_this.state={job:_this.props.job,jobLink:'/main/schedule/'+_this.props.job.id};return _this;}_createClass(ScheduleRow,[{key:'render',value:function render(){return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('tr',{key:this.state.job.id.toString()},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('th',{scope:'row'},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_2_react_router_dom__[\"b\" /* Link */],{to:this.state.jobLink},this.state.job[\"id\"])),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('td',null,__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_2_react_router_dom__[\"b\" /* Link */],{to:this.state.jobLink},this.state.job[\"app_name\"])),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('td',null,this.state.job[\"duration\"]),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('td',null,this.state.job[\"status\"]),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('td',null,__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_2_react_router_dom__[\"b\" /* Link */],{to:this.state.jobLink},'Details')));}}]);return ScheduleRow;}(__WEBPACK_IMPORTED_MODULE_0_react__[\"Component\"]);var Schedules=function(_Component2){_inherits(Schedules,_Component2);function Schedules(){_classCallCheck(this,Schedules);var _this2=_possibleConstructorReturn(this,(Schedules.__proto__||Object.getPrototypeOf(Schedules)).call(this));__WEBPACK_IMPORTED_MODULE_3_jquery___default.a.ajax({type:\"GET\",async:false,url:\"/schedule/get_jobs\",context:document.body,success:function success(data){jobsData=__WEBPACK_IMPORTED_MODULE_3_jquery___default.a.parseJSON(data.toString())[\"data\"];}});__WEBPACK_IMPORTED_MODULE_3_jquery___default.a.ajax({type:\"GET\",async:false,url:\"/appliance/get_all_status\",context:document.body,success:function success(data){appsData=__WEBPACK_IMPORTED_MODULE_3_jquery___default.a.parseJSON(data.toString())[\"data\"];}});return _this2;}_createClass(Schedules,[{key:'render',value:function render(){var _this3=this;return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('div',{className:'animated fadeIn'},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_reactstrap__[\"_7\" /* Row */],null,__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_reactstrap__[\"u\" /* Col */],{xl:{size:8,offset:2}},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_reactstrap__[\"i\" /* Card */],null,__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_reactstrap__[\"n\" /* CardHeader */],null,__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('i',{className:'fa fa-align-justify'}),' Schedules'),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_reactstrap__[\"j\" /* CardBody */],null,__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_reactstrap__[\"u\" /* Col */],{col:'6',xs:'4',sm:'2',md:'2',lg:'2',xl:'2',className:'mb-3 mb-xl-3'},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(ModalAddJob,{appdata:appsData})),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_reactstrap__[\"_10\" /* Table */],{responsive:true,striped:true},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('thead',null,__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('tr',null,__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('th',{scope:'col'},'Job ID'),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('th',{scope:'col'},'Appliance'),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('th',{scope:'col'},'Duration'),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('th',{scope:'col'},'Status'))),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('tbody',null,jobsData.map(function(job,index){return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(ScheduleRow,{key:index,job:job,reload:_this3.render});}))))))));}}]);return Schedules;}(__WEBPACK_IMPORTED_MODULE_0_react__[\"Component\"]);var ModalAddJob=function(_Component3){_inherits(ModalAddJob,_Component3);function ModalAddJob(props){_classCallCheck(this,ModalAddJob);var _this4=_possibleConstructorReturn(this,(ModalAddJob.__proto__||Object.getPrototypeOf(ModalAddJob)).call(this,props));var now=new Date();var date=now.getFullYear()+\"-\"+(now.getMonth()<9?\"0\":\"\")+(now.getMonth()+1)+\"-\"+(now.getDate()<10?\"0\":\"\")+now.getDate()+\"T\"+(now.getHours()<9?\"0\":\"\")+(now.getHours()+1)+\":00\";var data=_this4.props.appdata;var opt=[];for(var i=0;i<data.length;i++){opt.push(__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('option',null,data[i][\"id\"],'-',data[i][\"name\"]));}_this4.state={primary:false,option:opt,time:date};_this4.togglePrimary=_this4.togglePrimary.bind(_this4);_this4.submitJob=_this4.submitJob.bind(_this4);return _this4;}_createClass(ModalAddJob,[{key:'togglePrimary',value:function togglePrimary(){this.setState({primary:!this.state.primary});}},{key:'submitJob',value:function submitJob(){var index=document.getElementById(\"appname\").selectedIndex;var aid=appsData[index][\"id\"];var start_time=document.getElementById(\"start_after\").value;var finish_time=document.getElementById(\"finish_by\").value;var duration=document.getElementById(\"duration\").value;// check whether the inputs are valid\nif(finish_time<=start_time){alert(\"\\\"Finish by\\\" should be later than \\\"Start after\\\"\");return;}if(duration===\"\"){alert(\"Duration is required\");return;}var fin=new Date(finish_time);var sta=new Date(start_time);if(fin<new Date()){alert(\"Start time must be later than present!\");return;}var min=(fin-sta)/1000/60;if(min<duration){alert(\"Duration should be no longer than the time in between!\");return;}if(duration<=0){alert(\"Duration must not be less than zero!\");return;}var ret=\"Fail to send information\";__WEBPACK_IMPORTED_MODULE_3_jquery___default.a.ajax({type:\"POST\",async:false,url:\"/schedule/create_job\",data:{startTime:(sta.getTime()/1000).toFixed(0),lastTime:duration*60,stopTime:(fin.getTime()/1000).toFixed(0),aid:aid},context:document.body,success:function success(data){ret=data;}});alert(ret);if(ret===\"success\")window.location.reload();}},{key:'render',value:function render(){return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('div',{className:'animated fadeIn',style:{\"float\":\"left\"}},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_reactstrap__[\"_7\" /* Row */],null,__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_reactstrap__[\"u\" /* Col */],null,__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_reactstrap__[\"e\" /* Button */],{color:'primary',onClick:this.togglePrimary,className:'mr-1 mb-3'},'New schedule'),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_reactstrap__[\"Q\" /* Modal */],{isOpen:this.state.primary,toggle:this.togglePrimary,className:'modal-primary '+this.props.className},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_reactstrap__[\"T\" /* ModalHeader */],{toggle:this.togglePrimary},'Add a new job'),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_reactstrap__[\"R\" /* ModalBody */],null,'Appliance (ID-Name) :',__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_reactstrap__[\"G\" /* Input */],{id:\"appname\",type:\"select\"},this.state.option),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('br',null),'Start after: ',__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_reactstrap__[\"G\" /* Input */],{id:\"start_after\",type:\"datetime-local\",defaultValue:this.state.time}),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('br',null),'Finish by: ',__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_reactstrap__[\"G\" /* Input */],{id:\"finish_by\",type:\"datetime-local\",defaultValue:this.state.time}),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('br',null),'Duration in between (in minutes) : ',__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_reactstrap__[\"G\" /* Input */],{id:\"duration\",type:\"number\",placeholder:\"required\"})),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_reactstrap__[\"S\" /* ModalFooter */],null,__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_reactstrap__[\"e\" /* Button */],{color:'primary',onClick:this.submitJob},'Confirm'),' ',__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_reactstrap__[\"e\" /* Button */],{color:'secondary',onClick:this.togglePrimary},'Cancel'))))));}}]);return ModalAddJob;}(__WEBPACK_IMPORTED_MODULE_0_react__[\"Component\"]);/* harmony default export */ __webpack_exports__[\"default\"] = (Schedules);\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/15.e25a7e25.chunk.js","import React, { Component } from 'react';\r\nimport { Button, Badge, Card, CardBody, CardHeader, Col, Row, Table,\r\n  Modal, ModalBody, ModalFooter, ModalHeader, Input} from 'reactstrap';\r\n\r\n\r\nimport {Link} from 'react-router-dom';\r\nimport $ from 'jquery';\r\n\r\n\r\nlet jobsData = [{\"id\":1, \"status\":\"Pending\",  \"app_name\":\"app1\", \"duration\":\"100min\"},\r\n                {\"id\":3, \"status\": \"Running\", \"app_name\":\"app3\", \"duration\":\"1h\"}];\r\nlet appsData = [{\"id\":1, \"status\":\"Active\", \"power\": \"400\", \"name\":\"app1\", \"mfrs\":\"mfrs1\"},\r\n  {\"id\":3, \"status\": \"Inactive\",\"power\": \"400\", \"name\":\"app3\", \"mfrs\":\"mfrs3\"}];\r\n\r\n\r\n\r\nconst getBadge = (status) => {\r\n  return status === 'Active' ? 'success' :\r\n    status === 'Inactive' ? 'secondary' :\r\n      status === 'Pending' ? 'warning' :\r\n        status === 'Banned' ? 'danger' :\r\n          'primary'\r\n};\r\n\r\nclass ScheduleRow extends  Component{\r\n  constructor(props){\r\n    super(props);\r\n    this.state = {\r\n      job: this.props.job,\r\n      jobLink : '/main/schedule/' + this.props.job.id\r\n    };\r\n\r\n  }\r\n\r\n  render(){\r\n    return (\r\n        <tr key={this.state.job.id.toString()}>\r\n          <th scope=\"row\"><Link to={this.state.jobLink}>{this.state.job[\"id\"]}</Link></th>\r\n          <td><Link to={this.state.jobLink}>{this.state.job[\"app_name\"]}</Link></td>\r\n          <td>{this.state.job[\"duration\"]}</td>\r\n          <td>{this.state.job[\"status\"]}</td>\r\n          <td><Link to={this.state.jobLink}>Details</Link></td>\r\n            {/*<td><Badge href={appLink} color={getBadge(appliance.status)}>{appliance.status}</Badge></td>*/}\r\n        </tr>\r\n    )}\r\n}\r\n\r\nclass Schedules extends Component {\r\n\r\n  constructor(){\r\n    super();\r\n    $.ajax({\r\n      type: \"GET\",\r\n      async: false,\r\n      url: \"/schedule/get_jobs\",\r\n      context: document.body,\r\n      success: function(data){\r\n        jobsData = $.parseJSON(data.toString())[\"data\"];\r\n      }\r\n    });\r\n    $.ajax({\r\n      type: \"GET\",\r\n      async: false,\r\n      url: \"/appliance/get_all_status\",\r\n      context: document.body,\r\n      success: function(data){\r\n        appsData = $.parseJSON(data.toString())[\"data\"];\r\n      }\r\n    });\r\n\r\n\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"animated fadeIn\">\r\n        <Row>\r\n          <Col xl={{size: 8, offset: 2}}>\r\n            <Card>\r\n              <CardHeader>\r\n                <i className=\"fa fa-align-justify\"></i> Schedules\r\n              </CardHeader>\r\n              <CardBody>\r\n                <Col col=\"6\" xs=\"4\" sm=\"2\" md=\"2\" lg=\"2\" xl=\"2\" className=\"mb-3 mb-xl-3\">\r\n                  <ModalAddJob appdata={appsData}/>\r\n                </Col>\r\n                <Table responsive striped >\r\n                  <thead>\r\n                    <tr>\r\n                      <th scope=\"col\">Job ID</th>\r\n                      <th scope=\"col\">Appliance</th>\r\n                      <th scope=\"col\">Duration</th>\r\n                      <th scope=\"col\">Status</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {jobsData.map((job, index) =>\r\n                      <ScheduleRow key={index} job={job} reload={this.render}/>\r\n                    )}\r\n                  </tbody>\r\n                </Table>\r\n              </CardBody>\r\n            </Card>\r\n          </Col>\r\n        </Row>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\n\r\n\r\nclass ModalAddJob extends Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    let now = new Date();\r\n    let date = now.getFullYear() + \"-\" + (now.getMonth() < 9 ? \"0\" : \"\") +\r\n      (now.getMonth() + 1) + \"-\" + (now.getDate() < 10 ? \"0\" : \"\") +\r\n      (now.getDate()) + \"T\" + (now.getHours() < 9 ? \"0\" : \"\" ) + (now.getHours()+1) + \":00\";\r\n    let data = this.props.appdata;\r\n    let opt = [];\r\n    for(let i=0; i< data.length; i++){\r\n      opt.push(<option>{data[i][\"id\"]}-{data[i][\"name\"]}</option>)\r\n    }\r\n    this.state = {\r\n      primary: false,\r\n      option: opt,\r\n      time: date\r\n    };\r\n    this.togglePrimary = this.togglePrimary.bind(this);\r\n    this.submitJob = this.submitJob.bind(this);\r\n\r\n  }\r\n\r\n  togglePrimary() {\r\n    this.setState({\r\n      primary: !this.state.primary,\r\n    });\r\n  }\r\n\r\n  submitJob(){\r\n    let index = document.getElementById(\"appname\").selectedIndex;\r\n    let aid = appsData[index][\"id\"];\r\n    let start_time = document.getElementById(\"start_after\").value;\r\n    let finish_time = document.getElementById(\"finish_by\").value;\r\n    let duration = document.getElementById(\"duration\").value;\r\n\r\n    // check whether the inputs are valid\r\n    if (finish_time <= start_time){\r\n      alert(\"\\\"Finish by\\\" should be later than \\\"Start after\\\"\");\r\n      return;\r\n    }\r\n    if (duration === \"\"){\r\n      alert(\"Duration is required\");\r\n      return;\r\n    }\r\n    let fin = new Date(finish_time);\r\n    let sta = new Date(start_time);\r\n    if (fin < new Date()){\r\n      alert(\"Start time must be later than present!\");\r\n      return;\r\n    }\r\n    let min = (fin-sta)/1000/60;\r\n    if(min < duration){\r\n      alert(\"Duration should be no longer than the time in between!\");\r\n      return;\r\n    }\r\n    if ( duration <=0 ){\r\n      alert(\"Duration must not be less than zero!\");\r\n      return;\r\n    }\r\n\r\n\r\n    let ret = \"Fail to send information\";\r\n    $.ajax({\r\n      type: \"POST\",\r\n      async: false,\r\n      url: \"/schedule/create_job\",\r\n      data: {startTime: (sta.getTime()/1000).toFixed(0), lastTime: duration*60,\r\n        stopTime: (fin.getTime()/1000).toFixed(0), aid:aid},\r\n      context: document.body,\r\n      success: function(data){\r\n        ret = data;\r\n      }\r\n    });\r\n    alert(ret);\r\n    if (ret===\"success\")\r\n      window.location.reload();\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"animated fadeIn\" style={{\"float\":\"left\"}}>\r\n        <Row>\r\n          <Col>\r\n            <Button color=\"primary\" onClick={this.togglePrimary} className=\"mr-1 mb-3\">\r\n              New schedule\r\n            </Button>\r\n            <Modal isOpen={this.state.primary} toggle={this.togglePrimary}\r\n                   className={'modal-primary ' + this.props.className}>\r\n              <ModalHeader toggle={this.togglePrimary}>Add a new job</ModalHeader>\r\n              <ModalBody>\r\n                Appliance (ID-Name) :\r\n                <Input id={\"appname\"} type={\"select\"}>\r\n                  {this.state.option}\r\n                </Input>\r\n                <br/>\r\n                Start after: <Input id={\"start_after\"} type={\"datetime-local\"}\r\n                                    defaultValue={this.state.time}/>\r\n                <br/>\r\n                Finish by: <Input id={\"finish_by\"} type={\"datetime-local\"}\r\n                                  defaultValue={this.state.time}/>\r\n                <br/>\r\n                Duration in between (in minutes) : <Input id={\"duration\"} type={\"number\"} placeholder={\"required\"}/>\r\n\r\n              </ModalBody>\r\n              <ModalFooter>\r\n                <Button color=\"primary\" onClick={this.submitJob}>Confirm</Button>{' '}\r\n                <Button color=\"secondary\" onClick={this.togglePrimary}>Cancel</Button>\r\n              </ModalFooter>\r\n            </Modal>\r\n          </Col>\r\n        </Row>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n\r\nexport default Schedules;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/views/Schedules/Schedules.js"],"sourceRoot":""}