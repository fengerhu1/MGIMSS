<!doctype html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no"><title>MGIMSS</title><link rel="manifest" href="/manifest.json"><link rel="shortcut icon" href="/favicon.ico"><link href="./style.css"><script src="js/willesPlay.js" type="text/javascript" charset="utf-8"></script><script src="https://cdn.bootcss.com/jquery/2.1.1/jquery.min.js"></script><script src="https://cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js"></script><script type="text/javascript" src="https://cdn-hangzhou.goeasy.io/goeasy.js"></script><script type="text/javascript">let goEasy = new GoEasy({
        appkey: 'BS-a877d9d456a5459f982c7dfef47f42d0'
      });
      goEasy.subscribe({
        channel: 'MGIMSS',
        onMessage: function(message){

          let popNotice = function() {
            if (Notification.permission === "granted") {
              let notification = new Notification("Hi ：", {
                body: message.content,
              });
              notification.onclick = function() {
                notification.close();
              };
            }
          };

          if (Notification.permission === "granted") {
            popNotice();
          } else if (Notification.permission !== "denied") {
            Notification.requestPermission(function (permission) {
              popNotice();
            });
          }

        }});</script><style>.base{height:60px;position:absolute;width:60px;transform:translate(30%) rotateX(45deg) rotateZ(45deg);transform-style:preserve-3d;cursor:pointer}.cube,.cube:after,.cube:before{content:'';float:left;height:30px;position:absolute;width:30px}.cube{background-color:#05afd1;position:relative;transform:translateZ(30px);transform-style:preserve-3d;box-shadow:130px 130px 15px rgba(0,0,0,.1);animation:anim 1s infinite}.swift{animation:anim .5s infinite}.normal{animation:anim 1s infinite}.cube:after{background-color:#049dbc;transform:rotateX(-90deg) translateY(30px);transform-origin:100% 100%}.cube:before{background-color:#048ca7;transform:rotateY(90deg) translateX(30px);transform-origin:100% 0}.cube:nth-child(1){animation-delay:50ms}.cube:nth-child(2){animation-delay:.1s}.cube:nth-child(3){animation-delay:.15s}.cube:nth-child(4){animation-delay:.2s}.cube:nth-child(5){animation-delay:.25s}.cube:nth-child(6){animation-delay:.3s}.cube:nth-child(7){animation-delay:.35s}.cube:nth-child(8){animation-delay:.4s}.cube:nth-child(9){animation-delay:.45s}.cubeColor1{background-color:#05e0ff}.cubeColor2{background-color:#05cbf2}.cubeColor3{background-color:#05c1e7}@keyframes anim{50%{transform:translateZ(5px)}}.center{position:absolute;margin:auto;top:0;right:0;bottom:0;left:0}.menu{width:40px;height:40px;z-index:1000000}.title{width:300px;height:10px;top:60px}.item{position:absolute;left:0;top:0;width:90px;height:80px;border-radius:50%;cursor:pointer;text-align:center;line-height:40px}i{font-size:24px;color:#222}</style><link href="/static/css/main.e63818f6.css" rel="stylesheet"></head><body><div id="root"></div><div class="center menu haha" id="Menu"><div id="myMenu"></div></div><script src="/js/prefixfree.min.js" type="text/javascript"></script><script src="/js/jquery-1.11.3.min.js" type="text/javascript"></script><script src="/js/jquery-ui.min.js"></script><script src="/js/anime.js"></script><script src="/js/index.js"></script><video width="100%" height="100%" id="video" style="display:none"></video><script>var playVideo=document.getElementById("video");playVideo.muted=!0,console.log(playVideo)</script><script type="text/javascript" src="http://7xnlea.com2.z0.glb.qiniucdn.com/online.js"></script><script type="text/javascript">gID("Menu").style.top=(document.documentElement.clientHeight-gID("Menu").offsetHeight)/2+"px",gID("Menu").style.left=document.documentElement.clientWidth-12*gID("Menu").offsetWidth+"px",ScrollDiv("Menu")</script><style></style><script type="text/javascript" src="/static/js/main.00b0caec.js"></script></body><script>var recorder;!function(c){c.URL=c.URL||c.webkitURL,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;var o=function(e,t){(t=t||{}).sampleBits=t.sampleBits||8,t.sampleRate=t.sampleRate||7350,console.log(t.sampleBits),console.log("config.sampleBits"),console.log(t.sampleRate),console.log("config.sampleRate");var n=document.getElementById("video");n.src=c.URL.createObjectURL(e),n.onloadedmetadata=function(e){console.log("nihao44eee4aaaaddda"),n.play()},audioContext=c.AudioContext||c.webkitAudioContext;var r=new audioContext,o=r.createMediaStreamSource(e),a=r.createGain();o.connect(a);var i=r.createScriptProcessor(4096,2,2),s={size:0,buffer:[],inputSampleRate:44100,inputSampleBits:16,outputSampleRate:13800,oututSampleBits:16,input:function(e){this.buffer.push(new Float32Array(e)),this.size+=e.length},compress:function(){for(var e=new Float32Array(this.size),t=0,n=0;n<this.buffer.length;n++)e.set(this.buffer[n],t),t+=this.buffer[n].length;console.log(e);for(var r=parseInt(this.inputSampleRate/this.outputSampleRate),o=e.length/r,a=new Float32Array(o),i=0,s=0;i<o;)a[i]=e[s],s+=r,i++;return a},encodeWAV:function(){var e=Math.min(this.inputSampleRate,this.outputSampleRate),t=Math.min(this.inputSampleBits,this.oututSampleBits),n=this.compress(),r=n.length*(t/8),o=new ArrayBuffer(44+r),a=new DataView(o),i=0,s=function(e){for(var t=0;t<e.length;t++)a.setUint8(i+t,e.charCodeAt(t))};if(s("RIFF"),i+=4,a.setUint32(i,36+r,!0),i+=4,s("WAVE"),i+=4,s("fmt "),i+=4,a.setUint32(i,16,!0),i+=4,a.setUint16(i,1,!0),i+=2,a.setUint16(i,1,!0),i+=2,a.setUint32(i,e,!0),i+=4,a.setUint32(i,1*e*(t/8),!0),i+=4,a.setUint16(i,t/8*1,!0),i+=2,a.setUint16(i,t,!0),i+=2,s("data"),i+=4,a.setUint32(i,r,!0),i+=4,8===t)for(var c=0;c<n.length;c++,i++){var u=(d=Math.max(-1,Math.min(1,n[c])))<0?32768*d:32767*d;u=parseInt(255/(65535/(u+32768))),a.setInt8(i,u,!0)}else for(c=0;c<n.length;c++,i+=2){var d=Math.max(-1,Math.min(1,n[c]));a.setInt16(i,d<0?32768*d:32767*d,!0)}return new Blob([a],{type:"audio/wav"})}};console.log("采样率"),console.log(s),this.start=function(){o.connect(i),i.connect(r.destination)},this.close=function(){r.close()},this.stop=function(){i.disconnect()},this.getBlob=function(){return this.stop(),s.encodeWAV()},this.play=function(e){e.src=c.URL.createObjectURL(this.getBlob())},this.upload=function(e,t){var n=new FormData;n.append("audioData",this.getBlob());var r=new XMLHttpRequest;t&&(r.upload.addEventListener("progress",function(e){t("uploading",e)},!1),r.addEventListener("load",function(e){t("ok",e)},!1),r.addEventListener("error",function(e){t("error",e)},!1),r.addEventListener("abort",function(e){t("cancel",e)},!1)),r.open("POST",e),r.send(n)},i.onaudioprocess=function(e){s.input(e.inputBuffer.getChannelData(0))}};o.throwError=function(e){throw new function(){this.toString=function(){return e}}},o.canRecording=null!=navigator.getUserMedia,o.get=function(n,r){if(n){if(!navigator.getUserMedia)return void o.throwErr('当前<a href="http://www.it165.net/edu/ewl/" target="_blank" class="keylink">浏览器</a>不支持录音功能。');navigator.getUserMedia({audio:!0},function(e){var t=new o(e,r);n(t)},function(e){switch(e.code||e.name){case"PERMISSION_DENIED":case"PermissionDeniedError":o.throwError("用户拒绝提供信息。");break;case"NOT_SUPPORTED_ERROR":case"NotSupportedError":o.throwError('<a href="http://www.it165.net/edu/ewl/" target="_blank" class="keylink">浏览器</a>不支持硬件设备。');break;case"MANDATORY_UNSATISFIED_ERROR":case"MandatoryUnsatisfiedError":o.throwError("无法发现指定的硬件设备。");break;default:o.throwError("无法打开麦克风。异常信息:"+(e.code||e.name))}})}},o.get2=function(n,r){if(n){if(!navigator.getUserMedia)return void o.throwErr('当前<a href="http://www.it165.net/edu/ewl/" target="_blank" class="keylink">浏览器</a>不支持录音功能。');navigator.getUserMedia({audio:!0,video:{width:320,height:320}},function(e){var t=new o(e,r);n(t)},function(e){switch(e.code||e.name){case"PERMISSION_DENIED":case"PermissionDeniedError":o.throwError("用户拒绝提供信息。");break;case"NOT_SUPPORTED_ERROR":case"NotSupportedError":o.throwError('<a href="http://www.it165.net/edu/ewl/" target="_blank" class="keylink">浏览器</a>不支持硬件设备。');break;case"MANDATORY_UNSATISFIED_ERROR":case"MandatoryUnsatisfiedError":o.throwError("无法发现指定的硬件设备。");break;default:o.throwError("无法打开麦克风。异常信息:"+(e.code||e.name))}})}},c.HZRecorder=o}(window);var audio=document.querySelector("audio");function changeluyin1(){document.getElementById("luyin").src="/luyin2.gif"}function changeluyin2(){document.getElementById("luyin").src="/luyin.jpg"}function startRecording(){HZRecorder.get(function(e){(recorder=e).start()})}function startRecording2(){HZRecorder.get2(function(e){(recorder=e).start()});var e=10,t=setInterval(function(){0==e&&(document.getElementById("picture").click(),console.log("click"),clearInterval(t)),numDiv.innerHTML=e--},1e3)}function obtainRecord(){document.getElementById("luyin").src="/luyin.jpg";var e=recorder.getBlob(),t=new FileReader;t.readAsDataURL(e),t.onload=function(){var e;console.log(t.result),ans=t.result,window.XMLHttpRequest&&(e=new XMLHttpRequest),e.onreadystatechange=function(){4==e.readyState&&e.status},e.open("POST","/webSpeech",!0),e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.send("sudio="+ans)},recorder.close()}function stopRecord(){recorder.stop();var e=recorder.getBlob(),t=new FileReader;t.readAsDataURL(e),t.onload=function(){var e;console.log(t.result),ans=t.result,window.XMLHttpRequest&&(e=new XMLHttpRequest),e.onreadystatechange=function(){4==e.readyState&&e.status},e.open("POST","/webSpeech",!0),e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.send("sudio="+ans)},recorder.close()}function playRecord(){recorder.play(audio)}</script><script>/*小微*/
  let touchY = 0;
  let mousetouchY = 0;
  let swift = 0;
  $(".item").on({
    click: function(e) {
      if(swift === 0){
        swift = 1;
        let cube =  $('.cube');
        cube.removeClass('normal');
        cube.addClass('swift');
        startRecording();
      }
      else{
        swift = 0;
        let cube =  $('.cube');
        cube.removeClass('swift');
        cube.addClass('normal');
        stopRecord();
      }
      let touch = e.touches[0];
      mousetouchY = touch.clientY;
    },
    touchmove: function(e) {
      clearTimeout(timeOutEvent);
      timeOutEvent = 0;
      let touch = e.touches[0];
      if(Math.abs(touch.clientY - touchY) < 10){
        e.preventDefault();
      }
    },
    mousemove: function(e) {
      clearTimeout(mousetimeOutEvent);
      mousetimeOutEvent = 0;
      let touch = e.touches[0];
      if(Math.abs(touch.clientY - mousetouchY) < 10){
        e.preventDefault();
      }
    }
  });
  //
  // $(function() {
  //   window.onscroll = function () {
  //     let top1 = document.body.scrollTop;
  //     if (top1 >= 300)
  //       $("#Menu").css("position", "absolute").css("top", top1);       //300为div初始位置，当滚动条距离顶部的距离大于300时，使div与滚动条保持相同高度
  //     else
  //       $("#Menu").css("position", "absolute").css("top", 300);
  //   }
  // });</script></html>